<template>
  <div class="chart-container">
    <Bar :data="chartData" :options="chartOptions" />
    <div class="absolute bottom-[30px] left-[50%] -translate-x-1/2">
      <span class="text-[0.875rem]">10:10 AM</span>
    </div>
  </div>
</template>

<script setup lang="ts">
import { defineComponent } from 'vue'
import { Bar } from 'vue-chartjs'
import {
  Chart as ChartJS,
  CategoryScale,
  LinearScale,
  BarElement,
  Title,
  Tooltip,
  Legend
} from 'chart.js'

defineComponent({ name: 'ChartBar' })

ChartJS.register(CategoryScale, LinearScale, BarElement, Title, Tooltip, Legend)

const chartData = {
  labels: [''],
  datasets: [
    {
      label: 'C·ªôt A',
      backgroundColor: '#FF6384',
      data: [25],
      barPercentage: 0.7,
      categoryPercentage: 0.7
    },
    {
      label: 'C·ªôt B',
      backgroundColor: '#36A2EB',
      data: [40],
      barPercentage: 0.7,
      categoryPercentage: 0.7
    },
    {
      label: 'C·ªôt C',
      backgroundColor: '#FFCE56',
      data: [30],
      barPercentage: 0.7,
      categoryPercentage: 0.7
    }

  ]
}

const chartOptions = {
  responsive: true,
  maintainAspectRatio: true, // gi·ªØ t·ª∑ l·ªá ph√π h·ª£p
  aspectRatio: 3/4, // ƒêi·ªÅu ch·ªânh gi√° tr·ªã n√†y ƒë·ªÉ thay ƒë·ªïi t·ª∑ l·ªá
  scales: {
    y: {
      min: 0,          // Lu√¥n b·∫Øt ƒë·∫ßu t·ª´ 0
      max: 100,        // üëâ Ch·ªó n√†y ƒë·ªÉ m·ª©c t·ªëi ƒëa lu√¥n c·ªë ƒë·ªãnh 100
      ticks: {
        stepSize: 20,  // b∆∞·ªõc nh·∫£y tr√™n tr·ª•c tung
      }
    },
    x: {
      grid: { display: false }
    }

  },
  plugins: {
    legend: {
      position: 'bottom' as const,
      labels: {
        usePointStyle: true, // s·ª≠ d·ª•ng pointStyle ƒë·ªÉ hi·ªÉn th·ªã h√¨nh vu√¥ng ho·∫∑c tr√≤n
        pointStyle: 'rectRounded', // ki·ªÉu h√¨nh vu√¥ng bo nh·∫π r·∫•t ƒë·∫πp (c√≥ th·ªÉ ch·ªçn 'rect', 'rectRounded', 'circle', 'cross', ...)
        padding: 8,
        boxHeight: 8,
        boxWidth: 8,
      },
      padding: {
        top: 11,      // Gi·∫£m kho·∫£ng c√°ch ph√≠a tr√™n legend
        bottom: -100,   // Gi·∫£m kho·∫£ng c√°ch ph√≠a d∆∞·ªõi legend (gi·∫£m kho·∫£ng c√°ch legend v·ªõi bi·ªÉu ƒë·ªì)
      },
    },
    title: {
      display: true,
      text: 'V√≠ d·ª• bi·ªÉu ƒë·ªì Bar v·ªõi Chart.js',
      position: 'top',
    },
    layout: {
      padding: { top: 0, bottom: 0, backgroundColor: '#FFF' }
    }
  },
}
</script>

<style scoped>
.chart-container {
  position: relative;
  margin: auto;
  width: 100%;
  height: 280px;
  max-width: 600px;
  canvas {
    height: 100% !important;
  }
}
</style>
